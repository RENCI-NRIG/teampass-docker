# TeamPass

What is [TeamPass](https://teampass.net)?

- TeamPass is a Passwords Manager dedicated for managing passwords in a collaborative way by sharing them among team members.
Teampass offers a large set of features permitting to manage your passwords and related data in an organized way in respect to the access rights defined for each users.
Teampass is an Open-Source free to use product distributed in respect with OpenSource GNU GPL-3.0.

## TL;DR

The following will deploy TeamPass to localhost using the default configuration as found in the [.env](.env) file.

```
mkdir -p \
  volumes/teampass \
  volumes/php/session \
  volumes/db
docker-compose up -d
```

From your browser, navigate to [https://localhost:443]() and configure your TeamPass deployment.

Enjoy!

## Setup and Configuration

### Setup

Create local directories to persist the data being generated by the TeamPass services.

```
mkdir -p \
  volumes/teampass \
  volumes/php/session \
  volumes/db
```

### Configure

Configuration is done via the [.env](.env) file. It is pre-populated with sane defaults for development evaluation on localhost using self signed SSL certificates.

File `.env`:

```
# TeamPass
VIRTUAL_HOST=localhost                   # Hostname being deployed to
LOCAL_TEAMPASS_HOME=./volumes/teampass   # Local TeamPass data directory
LOCAL_PHP_SESSION=./volumes/php/session  # Local PHP session directory

# MySQL Database
MYSQL_ROOT_PASSWORD=mypass               # MySQL root password
MYSQL_DATABASE=teampass                  # MySQL TeamPass database name
MYSQL_PASSWORD=teampass                  # MySQL TeamPass user
MYSQL_USER=teampass                      # MySQL TeamPass user password
LOCAL_DB_DATA=./volumes/db               # Local MySQL data directory

# Nginx
HTTPS_PORT=443                           # HTTPS port to serve TeamPass on
LOCAL_SSL_CERTS=./volumes/ssl            # Local SSL certificate directory
LOCAL_DOCKER_SOCK=-/var/run/docker.sock  # Local docker socket
```

**NOTE**: The contents of `LOCAL_SSL_CERTS` should contain the certificates and private keys for any virtual hosts in use. The certificate and keys should be named after the virtual host with a `.crt` and `.key` extension. For example, a container with `VIRTUAL_HOST=foo.bar.com` should have a `foo.bar.com.crt` and `foo.bar.com.key` file in the certs directory.

## Deploy

Once the environment is configured, the user can bring all the services up using docker compose.

```
docker-compose up -d
```

The user should observe three running containers

```console
$ docker-compose ps
  Name                Command                  State                  Ports
---------------------------------------------------------------------------------------
db         /entrypoint.sh mysqld            Up (healthy)   3306/tcp, 33060/tcp
nginx      /app/docker-entrypoint.sh  ...   Up             0.0.0.0:443->443/tcp, 80/tcp
teampass   /bin/sh /teampass-docker-s ...   Up             443/tcp, 80/tcp, 9000/tcp
```

From your browser, navigate to the location defined by [$VIRTUAL\_HOST:$HTTPS\_PORT]() and configure your TeamPass deployment. From the example this is [https://localhost:443]().

## TeamPass Configuration

Use `/var/www/html/sk` for the absolute path of your saltkey


## Clean up

The following commands will stop all compose services, remove them from the system, prune the associated volumes and networks, and purge the local files associated with TeamPass. The final removal command may require sudo rights depending on the permissions of the user making the call.

```
docker-compose stop && docker-compose rm -f
docker volume prune -f
docker network prune -f
rm -rf \
  volumes/teampass \
  volumes/php \
  volumes/db
```

## References

- TeamPass Documentation: [https://teampass.readthedocs.org/](https://teampass.readthedocs.org/)
- TeamPass Main site: [https://teampass.net](https://teampass.net)
- GitHub: [https://github.com/nilsteampassnet/TeamPass](https://github.com/nilsteampassnet/TeamPass)
- DockerHub: [https://hub.docker.com/r/teampass/teampass](https://hub.docker.com/r/teampass/teampass)
- jwilder/nginx-proxy: [https://github.com/jwilder/nginx-proxy](https://github.com/jwilder/nginx-proxy)


